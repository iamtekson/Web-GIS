var map=L.map("map",{zoomControl:!1}).setView([28.2521,83.9774],18),scale=L.control.scale().addTo(map);function fullScreenTgl(){let e=document,t=e.documentElement;t.requestFullscreen?e.fullscreenElement?e.exitFullscreen():t.requestFullscreen():t.mozRequestFullScreen?e.mozFullScreen?e.mozCancelFullScreen():t.mozRequestFullScreen():t.msRequestFullscreen?e.msFullscreenElement?e.msExitFullscreen():t.msRequestFullscreen():t.webkitRequestFullscreen?e.webkitIsFullscreen?e.webkitCancelFullscreen():t.webkitRequestFullscreen():console.log("Fullscreen support not detected.")}function latlng(){map.on("mousemove",function(e){return $(".latlng").text("Lat, Lon : "+e.latlng.lat+", "+e.latlng.lng)}),setTimeout(latlng,1e3)}$(".zoom-in").click(function(){map.setZoom(map.getZoom()+1)}),$(".zoom-out").click(function(){map.setZoom(map.getZoom()-1)}),$(".extend").click(function(){map.setView([28.2521,83.9774],18)}),$(".full-browser").click(fullScreenTgl),$(".options").click(function(){$(".toggle-content").toggle()}),latlng();var osm=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(map),OpenTopoMap=L.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'Map data: &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}),Stamen_Watercolor=L.tileLayer("https://stamen-tiles-{s}.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd",minZoom:1,maxZoom:19,ext:"jpg"}),CartoDB_DarkMatter=L.tileLayer("https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',subdomains:"abcd",maxZoom:19}),mapBox=L.tileLayer("https://api.tiles.mapbox.com/styles/v1/{username}/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",{attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',username:"iamtekson",id:"cjwhym7s70tae1co8zf17a3r5",accessToken:"pk.eyJ1IjoiaWFtdGVrc29uIiwiYSI6ImNqdjV4YzI4YjB0aXk0ZHBtNnVnNWxlM20ifQ.FjQJyCTodXASYtOK8IrLQA"}),baseLayer={"Open Street Map":osm,"Open Topo Map":OpenTopoMap,"Stamen Water color":Stamen_Watercolor,"Dark matter":CartoDB_DarkMatter,"Map Box":mapBox};function clickMarker(){map.on("click",function(e){new L.Marker([e.latlng.lat,e.latlng.lng]).addTo(map)})}function clearMarker(){$(".fa-map-marker-alt").off("click")}$(".fa-map-marker-alt").click(clickMarker);var s_light_style={radius:8,fillColor:"#ff7800",color:"#000",weight:1,opacity:1,fillOpacity:.8},light1=L.geoJSON(street,{onEachFeature:function(e,t){t.on({click:function(t){$(".addsidebar-popup").slideDown(),$(".lat").html("<b>Latitude : </b>"+t.latlng.lat),$(".long").html("<b>longitude : </b>"+t.latlng.lng),$(".sidebar-info").html('<h4 class = "text-primary">Street Light</h4><div class="container"><table class="table table-striped"><thead><tr><th>Properties</th><th>Value</th></tr></thead><tbody><tr><td> Name </td><td>'+e.properties.Name+"</td></tr><tr><td>Elevation </td><td>"+e.properties.ele+"</td></tr><tr><td> Power (watt) </td><td>"+e.properties.Power_Watt+"</td></tr><tr><td> Pole Height </td><td>"+e.properties.pole_hgt+"</td></tr><tr><td> Time </td><td>"+e.properties.time+"</td></tr>")}})},pointToLayer:function(e,t){return L.circleMarker(t,s_light_style)}}),light=L.markerClusterGroup().addLayer(light1);light.addTo(map);var streetLight=(new L.layerGroup).addLayer(light),overlays={"Street Lights":streetLight};L.control.layers(baseLayer,overlays).addTo(map),L.control.browserPrint({title:"Print current Layer",documentTitle:"Utility Management System",printModes:[L.control.browserPrint.mode.landscape("Tabloid VIEW","Tabloid"),L.control.browserPrint.mode.landscape(),"PORTrait",L.control.browserPrint.mode.auto("Auto","B4"),L.control.browserPrint.mode.custom("Selected area","B5")],manualMode:!1,closePopupsOnPrint:!0}).addTo(map),$(".print").click(function(){var e=L.control.browserPrint.mode.landscape();map.printControl.print(e)}),$(".addVectorLayer_btn").click(function(){$(".addVectorLayer").toggle()}),map.on("click",function(){$(".addVectorLayer").hide()});var fileInput=document.getElementById("input_files");function geojsonData(){fileInput.addEventListener("change",function(e){var t=fileInput.files[0],o=new FileReader;fileInput.value="",o.onload=function(){console.log(o.result);var e=omnivore.geojson(o.result).addTo(map);map.fitBounds(e.getBounds())},o.readAsDataURL(t)})}function csvData(){fileInput.addEventListener("change",function(e){var t=fileInput.files[0],o=new FileReader;fileInput.value="",o.onload=function(){console.log(o.result);var e=omnivore.csv.parse(o.result).addTo(map);map.fitBounds(e.getBounds())},o.readAsText(t)})}geojsonData(),$(".measure-btn").click(function(){$(".leaflet-control-measure").toggle(),$(".leaflet-control-measure-interaction").show(),$(".leaflet-control-measure-toggle").hide()}),$(".js-cancel").click(function(){$(".leaflet-control-measure").hide()}),$(".js-finish").click(function(){$(".leaflet-control-measure").hide()});var measureControlOption={primaryLengthUnit:"meters",secondaryLengthUnit:"kilometers",primaryAreaUnit:"sqmeters",secondaryAreaUnit:void 0,activeColor:"#ed3833",completedColor:"#63aabc"},measureControl=L.control.measure(measureControlOption);measureControl.addTo(map),$(".fa-info-circle").click(function(){$("*").toggleClass("help")}),$(".sidebar-close").click(function(){$(".addsidebar-popup").hide()});